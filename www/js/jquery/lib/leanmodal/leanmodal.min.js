_height = document.body.scrollHeight > document.body.offsetHeight ? document.body.scrollHeight : document.body.offsetHeight;		
var  box = {		
		width: 400,
		height: 100,
		ie6:/MSIE 6\.0/i.test(window.navigator.userAgent) && !/MSIE 7\.0/i.test(window.navigator.userAgent),
		confirm: function(message,width,title,callback) { 
			box._show(message,width,'confirm',title);

			$("#modeal_ok").click( function() {	
				if( callback ) var s = callback(true);
				if(s!='stop')box._hide();
			});

			$("#modeal_cancel").click( function() {
				box._hide();
				if( callback ) callback(false);
			});
			
		},
		
		alert: function(message,width,callback) { 
			box._show(message,width,'alert');
			$("#modeal_cancel").click( function() {	
				box._hide();
				if( callback ) callback(true);
			});

		},
		
		_show: function(message,width,type,title) { 
			box._overlay();
			var t =(typeof message);
			if(t == 'object'){  
				var mo = message;
				message = mo.html();
				//mo.html('');
			}
			if(!title) title = "提示";
			var html = '<div class="modal">' +
			    '<div class="modal-header">' +
				'<div class="modal_title">'+title+'</div>' +
				'<div class="modal_close"></div></div>' +
			    '<div class="modal-body">' ;
				 
			if(type){	
				html += '<div class="icon"></div>';
			}
			html +='<div class="text">'+message+'</div>';
			html +='</div><div class="modal-footer">';

			if(type === 'confirm'){
				html +=	'<button id="modeal_ok" class="btn bnt51a35" type="submit">确认</button>';
			}
			
			if(type === 'confirm' || type === 'alert' ){
			html +=	'<button id="modeal_cancel" class="btn rowbnt" type="submit">取消</button>';
			}
			html += '</div></div>';

			$("body").append(html);
			
			if(!width){ 
				width =  box.width;
			}

			$(".modal").css({
					width: width + 'px'
			});
			 
			 
			 if(box.ie6){
				$(".modal").css({
					position: 'absolute'
				});	
			} 
			
			
			 box._position();
			
			
			$(".modal_close").click( function() {	
				box._hide();
			});
			
			
		},

		_position: function() {
			 
			var top = (($(window).height() / 2) - ($(".modal").outerHeight() / 2));
			var left = ($(window).width() - $(".modal").width()) / 2;
			if( top < 0 ) top = 0;
			if( left < 0 ) left = 0;
			
			// IE6 fix
			if( $.browser.msie && parseInt($.browser.version) <= 6 ) top = top + $(window).scrollTop();
			
			$(".modal").css({
				top: top + 'px',
				left: left + 'px'
			});
			 
		},

		_hide: function() {
			$("#lean_overlay").remove();
			$(".modal").remove();
			if(window.j_html){
				$(j_html_id).html(j_html);
			}
		},

		_overlay: function() {
			 var overlay = $("<div id='lean_overlay'></div>");
			 $("body").append(overlay);
				$("#lean_overlay").css({
					position: 'fixed',
					zIndex: 100,
					top: '0px',
					left: '0px',
					width: '100%',
					height:'100%',
					background: '#000',
					adisplay: 'none', 
					opacity: 0.1
				});
		 	if(box.ie6){
				
				$("#lean_overlay").css({
					position: 'absolute',
					height:_height+ 'px'
				});	
			} 
			
		},
		
		form:function(id,title,width){
			if(!width){ 
				width =  600;
			}
			j_html_id=$(id);
			j_html = $(j_html_id).html();
			$(j_html_id).html('');
			box._show (j_html,width,'',title);
			$(".modal-body >.text").css({
						"margin":"0","padding-top":"0"
					});
		},
		form_textarea_html:function(url,name,value,title,status,checked_index){
				box.form_input_html(url,name,value,title,status,checked_index,'textarea');
		},
		form_input_html:function(url,name,value,title,status,checked_index,input){  
			var html = '<form action="'+url+'" method="post" id="form_html">';
				if(input == 'textarea'){
					if(status){
						html += '<div style="height:30px;"><label><input type="radio" name="status" value="1" onclick="javascript:$(\'#a\').html(\'信息无误，允许通过！\');" checked>审核通过</label><label><input type="radio" name="status" value="2" onclick="javascript:$(\'#a\').html(\'信息不完整，拒绝通过！\');">拒绝通过</label></div>';
					}
					
					html += '<textarea  class="input_text span70 textarea_text" id="'+name+'" name="'+name+'">' + value + '</textarea>';
				}else{
					html += '<input type="text" class="input_text span70" id="'+name+'" name="'+name+'" value="'+value+'" />' ;
				}		
				 html += '<button type="submit" class="btn bnt51a35">提交 »</button>'+
						'<div id="err"></div>'+
						'</form>';
			box._show (html,500,'',title);
			
			if(checked_index) 
				$('input[name=status]').get(checked_index).checked = true;
			else 
				$('input[name=status]').get(0).checked = true;
				
				 
			
			$(".modal-body > .text ").css({
						"margin-left":"10px","margin-bottom":"0px"
					});
		 	
			$("#form_html").validate({
		    errorClass :"error", 
			highlight: function(element) {
					$(element).closest('div').addClass("f_error");
				},
			unhighlight: function(element) {
				$(element).closest('div').removeClass("f_error");
			},
			 
			errorElement: 'span',
			errorPlacement: function(error, element) {   
				error.appendTo($("#err"));   
			},
		 
			success: function(label) {
				 
			}
			});
		 
			$("#"+name).rules("add",{required : true,messages:{required:"该项不能为空"}});
		 	
		}
	} 
	
 
	
 